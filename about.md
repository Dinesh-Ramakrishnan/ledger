# About the site

This is the website for ledger, the command-line accounting tool.

The main site is static html generated by
[hakyll](http://jaspervdj.be/hakyll), kept in the main ledger repo's
[`website`](https://github.com/jwiegley/ledger/tree/website) branch.
Commits are published to ledger-cli.org every 15 minutes.
<!-- Commits are published to ledger-cli.org immediately, and announced on #ledger. -->

Version-specific documentation, with urls beginning `/3.0/` or
`/2.6/`, comes from the ledger docs in the
[`next`](https://github.com/jwiegley/ledger/tree/next) and
[`maint`](https://github.com/jwiegley/ledger/tree/maint) branches
respectively.

The news feed in the sidebar comes from
[http://pipes.yahoo.com/simonmichael/ledgernews](http://pipes.yahoo.com/simonmichael/ledgernews),
which aggregates:

- some known ledger-user blogs
- identi.ca dents with the #ledgercli hashtag
- twitter tweets with the #ledgercli hashtag (unreliable since pipes often exceeds its twitter bandwidth)

Some site config that's not kept in the repo:

Apache vhost:
    
    <VirtualHost *:80>
      ServerName ledger-cli.org
      ServerAlias www.ledger-cli.org list.ledger-cli.org git.ledger-cli.org wiki.ledger-cli.org

      RewriteEngine on

      # convenience aliases

      # list.ledger-cli.org -> mail list
      RewriteCond %{HTTP_HOST} ^list.ledger-cli.org$
      RewriteRule ^(.*)                    http://groups.google.com/group/ledger-cli$1 [L]
      RewriteRule ^/(?:lists?)(/(.*)|$) http://groups.google.com/group/ledger-cli$1 [L]

      # git.ledger-cli.org -> git repo
      RewriteCond %{HTTP_HOST} ^git.ledger-cli.org$
      RewriteRule ^(.*)                    http://github.com/jwiegley/ledger$1 [L]

      # wiki.ledger-cli.org -> wiki
      RewriteCond %{HTTP_HOST} ^wiki.ledger-cli.org$
      RewriteRule ^(.*)                    http://github.com/jwiegley/ledger/wiki$1 [L]

      # serve almost everything else from the hakyll-generated website
      RewriteCond %{REQUEST_URI} !^/(cgi-bin|awstats|icons)
      RewriteRule ^(.*) /repos/ledger-website/_site$1 [L]
    </VirtualHost>

Cron rules:

    # pull latest ledger docs
    */15 * * * * simon  cd /repos/ledger;         git pull -q && cd doc && make --quiet
    */15 * * * * simon  cd /repos/ledger2.6;      git pull -q && make --quiet
    # pull latest site, fallback in case github listener not running
    */15 * * * * simon  cd /repos/ledger-website; git pull -q && make --quiet

